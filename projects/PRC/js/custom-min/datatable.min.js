var DT=function(){function a(a,t,e,n,o){var r=[],i=""!=n?"onclick="+n+"("+HELPER.splitParams(o)+")>":">";return r.push("<tr id='"+a+"' class='"+e+"'"+i),$.each(t,function(a,t){r.push("<td class='text-center'>"+t+"</td>")}),r.push("</tr>"),r}function t(){var a="<span>List of selected patients :<span>";a+="<ul>";for(var t=0;t<TAB_SELECTED_VALUES.length&&t<4;t++)$.each(e,function(e,n){TAB_SELECTED_VALUES[t]==n.id&&(a+="<li>",a+=n.admin.nom.toUpperCase()+" "+n.admin.prenom,a+="</li>")});return a+="</ul>"}TAB_SELECTED_VALUES=[];var e="";return{loadTableData:function(){$.getJSON("data/MOCK_DATA.JSON",function(t){e=t;var n=[];$.each(t,function(t,e){var o=e.admin,r=e.biometrie,i=e.const_biologique,s=e.parametres,E=e.assuetudes,l=[o.nom,o.prenom,HELPER.formatDate(o.date_de_naissance,"yyyymmdd"),"Male"==o.genre?"M":"F",HELPER.getBmi(r.poids,r.taille),HELPER.ratioToPercent(i.HbA1c)+"%",i.Cholesterol_total,i.Cholesterol_HDL,s.PSS,E.Consommation_tabagique];n.push(a(e.id,l,"","DT.selectValue",[e.id]))}),$("#tbodyData").append(n.join("")),$("#tblData").DataTable()})},removePatient:function(){$("#tbodyData tr").removeClass("table-info"),TAB_SELECTED_VALUES=[],CHART.destroyChartCanvas()},redrawChart:function(){CHART.destroyChartCanvas(),CHART.generateFullChartFromJSON(TAB_SELECTED_VALUES,e)},selectValue:function(a){if($("#"+a).hasClass("table-info")){$("#"+a).removeClass("table-info");var n=TAB_SELECTED_VALUES.indexOf(a);n>-1&&TAB_SELECTED_VALUES.splice(n,1)}else TAB_SELECTED_VALUES.length<4?($("#"+a).addClass("table-info"),TAB_SELECTED_VALUES.push(a)):($("#modalPatientList").empty(),$("#modalPatientList").append(t),$("#alertModal").modal("show"));CHART.generateFullChartFromJSON(TAB_SELECTED_VALUES,e)}}}();
